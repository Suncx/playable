.page-header
  %h1 
    = t('layout.checkin')
    
  - if @event.checkout_at?
    = link_to t("event.check_in"), checkin_path, :class => 'btn large primary'
  - else
    = link_to t("event.check_out"), checkout_path, :class => 'btn large primary'

.row
  .span16
    %table#sortTableExample.zebra-striped
      %thead
        %tr
          %th.blue= ta Event, :data
          %th.blue= ta Event, :user_name
          %th.blue{:width => 150}= ta Event, :checkin_at
          %th.blue{:width => 150}= ta Event, :checkout_at
          %th.blue= ta Event, :real_work_time
          %th.blue= ta Event, :description
          %th.blue= ta Event, :feedback
          %th.blue= ta Event, :type_identifier
          %th.blue= ta Event, :state
      %tbody
        - if @events.blank?
          %tr
            %td &nbsp;
            %td{:colspan => 9}= t('admin.meta.empty_data')
        - else
          - @events.each do |resource|
            %tr
              %td= resource.created_at.to_date
              %td= link_to resource.user.username, admin_user_events_path(resource.user)
              %td= resource.checkin_at.strftime("%Y-%m-%d %H:%I")
              
              - if resource.checkout_at
                %td= resource.checkout_at.strftime("%Y-%m-%d %H:%I")
              - else
                %td
                
              - if resource.checkout_at
                %td= ((resource.checkout_at.to_i - resource.checkin_at.to_i)/3600.00).round(2).to_s << '小时'
              - else
                %td
              %td
                = resource.description
                %br
                = link_to t('admin.actions.edit'), edit_event_path(resource)
              %td= resource.feedback
              %td= resource.type_identifier
              %td= resource.state
        = paginate @events, :default_per_page => 10